DROP TABLE IF EXISTS PERSONNES;
create table PERSONNES (
    ID bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    VERSION integer not null,
    NOM varchar(30) not null,
    PRENOM varchar(30) not null,
    TELEPHONE varchar(30),
    CIVILITE integer  not null,
    CREATED timestamp  not null,
    MODIFY timestamp,
    CONSTRAINT IDX_PERSONNES PRIMARY KEY (ID)
);

INSERT INTO PERSONNES ( ID, VERSION, NOM, PRENOM, CIVILITE, TELEPHONE, CREATED) VALUES (1, 1, 'MARTIN', 'Jules', 1, '00',now());
INSERT INTO PERSONNES ( ID, VERSION, NOM, PRENOM, CIVILITE, TELEPHONE, CREATED) VALUES (2, 1, 'GERMAN', 'Christine', 2, '00',now());
INSERT INTO PERSONNES ( ID, VERSION, NOM, PRENOM, CIVILITE, TELEPHONE, CREATED) VALUES (3, 1, 'JACQUARD', 'Jules', 1, '00',now());
INSERT INTO PERSONNES ( ID, VERSION, NOM, PRENOM, CIVILITE, TELEPHONE, CREATED) VALUES (4, 1, 'BISTROU', 'Brigitte', 3, '00',now());


DROP TABLE IF EXISTS ADRESSES;
CREATE TABLE ADRESSES (
    ID bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    VERSION integer not null,
    ADR1 varchar(32) not null,
    ADR2 varchar(32),
    VILLE varchar(32) not null,
    CP varchar(5) not null,
	CREATED timestamp   not null,
    CONSTRAINT IDX_ADRESSES PRIMARY KEY (ID)
);
INSERT INTO ADRESSES ( ID, VERSION, ADR1, ADR2, VILLE, CP, CREATED) VALUES (1,1, 'rue de la broche',null,'Niort', '79000', now());
INSERT INTO ADRESSES ( ID, VERSION, ADR1, ADR2, VILLE, CP, CREATED) VALUES (2,1, 'rue de la barre',null,'Niort', '79001', now());
INSERT INTO ADRESSES ( ID, VERSION, ADR1, ADR2, VILLE, CP, CREATED) VALUES (3,1, 'rue de la pioche',null,'Niort', '79002', now());

DROP TABLE IF EXISTS CIVILITES;
CREATE TABLE CIVILITES ( 
	ID integer NOT NULL, 
    LIBELLE_COURT varchar(5) not null,
    LIBELLE_LONG varchar(30) not null,
    CONSTRAINT IDX_CIVILITES PRIMARY KEY (ID)
);
INSERT INTO CIVILITES ( ID, LIBELLE_COURT, LIBELLE_LONG) VALUES (1, 'Mr.', 'Monsieur');
INSERT INTO CIVILITES ( ID, LIBELLE_COURT, LIBELLE_LONG) VALUES (2, 'Mme.', 'Madame');
INSERT INTO CIVILITES ( ID, LIBELLE_COURT, LIBELLE_LONG) VALUES (3, 'Mlle.', 'Mademoiselle');

DROP TABLE IF EXISTS PERSONNE_ADRESSE;
CREATE TABLE PERSONNE_ADRESSE ( 
	personneId integer NOT NULL, 
	adresseId integer NOT NULL, 
	PRIMARY KEY (personneId,adresseId)
);
INSERT INTO PERSONNE_ADRESSE (personneId, adresseId) values (1,1);
INSERT INTO PERSONNE_ADRESSE (personneId, adresseId) values (1,2);
INSERT INTO PERSONNE_ADRESSE (personneId, adresseId) values (2,1);
INSERT INTO PERSONNE_ADRESSE (personneId, adresseId) values (3,3);
INSERT INTO PERSONNE_ADRESSE (personneId, adresseId) values (4,2);
